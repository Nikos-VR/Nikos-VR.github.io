<html>
<head>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://c-frame.github.io/aframe-physics-system/dist/aframe-physics-system.js"></script>
    <script>
        AFRAME.registerComponent('walls', {
            var el = this.el;
            init: function () {
                el.addEventListener('collide', function (e) {
                    console.log('Player has collided with body #' + e.detail.body.id);

                    e.detail.target.el;  // Original entity (playerEl).
                    e.detail.body.el;    // Other entity, which playerEl touched.
                    e.detail.contact;    // Stats about the collision (CANNON.ContactEquation).
                    e.detail.contact.ni; // Normal (direction) of the collision (CANNON.Vec3).
                });
            }
            tick: function () {
                var pos = el.getAttribute('position');
                if (pos.x < -9) pos.x = -9;
                if (pos.x > 9) pos.x = 9;
                if (pos.z < -9) pos.z = -9;
                if (pos.z > 9) pos.z = 9;
                el.setAttribute('position', pos);
            }
        });
  </script>
</head>
<body>
    <a-scene id="s1" cursor="rayOrigin: mouse" physics>
        <a-plane id="p1" static-body width="20" height="4" position="-10 0 0" rotation="0 90 0"></a-plane>
        <a-plane id="p2" static-body width="20" height="4" position="10 0 0" rotation="0 -90 0"></a-plane>
        <a-plane id="p3" static-body width="20" height="4" position="0 0 10" material="side:back"></a-plane>
        <a-plane id="p4" static-body width="20" height="4" position="0 0 -10"></a-plane>
        <a-plane id="p5" static-body width="20" height="20" position="0 -2 0" rotation="-90 0 0"></a-plane>
        <a-plane id="p6" static-body width="20" height="20" position="0 2 0" rotation="90 0 0"></a-plane>
        <a-camera position="0 1.5 0" walls>
            <a-box static-body scale="1 2 1" position="0 -1.5 0"></a-box>
            <a-entity light="angle: 60; distance: 20; intensity: 0.5; type: spot"></a-entity>
        </a-camera>
    </a-scene>
    <script>
        var scene1 = document.getElementById('s1');
        for (var i = 0; i < 10; i++) {
            var box = document.createElement('a-box');
            var x = Math.random() * 15 - 8;
            var y = Math.random() * 2 + 1;
            var z = Math.random() * 15 - 8;
            box.setAttribute('dynamic-body', '');
            box.setAttribute('id', 'box' + i);
            box.setAttribute('position', x + ' ' + y + ' ' + z);
            scene1.appendChild(box);
        }
    </script>
</body>
</html>
